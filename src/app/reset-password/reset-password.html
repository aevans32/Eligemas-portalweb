<div class="page-container">
  <app-header></app-header>

  <div class="title-container">
    <div class="title">
      <span>Restablecer contraseña</span>
    </div>
  </div>

  <div class="content-wrapper">
    <div class="content-container">
      <div class="card">

        <form [formGroup]="resetForm">

          <!-- Nueva contraseña -->
          <mat-form-field appearance="outline">
            <mat-label>Nueva contraseña</mat-label>

            <input
              matInput
              [type]="hidePassword ? 'password' : 'text'"
              formControlName="password"
            />

            <button
              mat-icon-button
              matSuffix
              type="button"
              (click)="hidePassword = !hidePassword"
            >
              <mat-icon>
                {{ hidePassword ? 'visibility' : 'visibility_off' }}
              </mat-icon>
            </button>

            @if(resetForm.get('password')?.hasError('required')){
                <mat-error>La contraseña es requerida</mat-error>
                }

                @if(resetForm.get('password')?.hasError('minlength')){
                <mat-error>Mínimo 8 caracteres</mat-error>
                }

                @if(resetForm.get('password')?.hasError('pattern')){
                <mat-error>Debe contener al menos una letra mayúscula</mat-error>
                }

          </mat-form-field>

          <!-- Confirmar contraseña -->
          <mat-form-field appearance="outline">
            <mat-label>Confirmar contraseña</mat-label>

            <input
              matInput
              [type]="hideConfirm ? 'password' : 'text'"
              formControlName="confirmPassword"
            />

            <button
              mat-icon-button
              matSuffix
              type="button"
              (click)="hideConfirm = !hideConfirm"
            >
              <mat-icon>
                {{ hideConfirm ? 'visibility' : 'visibility_off' }}
              </mat-icon>
            </button>

            @if(
                resetForm.get('confirmPassword')?.hasError('passwordMismatch') &&
                (resetForm.get('confirmPassword')?.touched || resetForm.get('confirmPassword')?.dirty)
            ){
                <mat-error>Las contraseñas no coinciden</mat-error>
            }

          </mat-form-field>

          <div class="action-button-container">
            <button
              class="action-button"
              type="button"
              mat-flat-button
              (click)="onSubmit()"
              [disabled]="resetForm.invalid"
            >
              ACTUALIZAR CONTRASEÑA
            </button>
          </div>

        </form>

      </div>
    </div>
  </div>

  <app-footer></app-footer>
</div>